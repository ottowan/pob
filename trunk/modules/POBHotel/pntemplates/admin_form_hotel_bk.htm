<link rel="stylesheet" href="modules/POBHotel/pnjavascript/datepicker/development-bundle/themes/base/jquery.ui.all.css">

<script src="modules/POBHotel/pnjavascript/datepicker/development-bundle/jquery-1.5.1.js"></script>
<script src="modules/POBHotel/pnjavascript/datepicker/development-bundle/ui/jquery.ui.core.js"></script>
<script src="modules/POBHotel/pnjavascript/datepicker/development-bundle/ui/jquery.ui.widget.js"></script>
<script src="modules/POBHotel/pnjavascript/datepicker/development-bundle/ui/jquery.ui.datepicker.js"></script>
<script src="modules/POBHotel/pnjavascript/datepicker/development-bundle/ui/jquery.ui.tabs.js"></script>
<link rel="stylesheet" href="modules/POBHotel/pnjavascript/datepicker/development-bundle/demos/demos.css">

	<script>
	$(function() {
      $( "#datepicker" ).datepicker({
        changeMonth: true,
        changeYear: true,
        showOn: "button",
        dateFormat: 'yy-mm-dd',
        buttonImage: "modules/POBHotel/pnjavascript/datepicker/development-bundle/demos/datepicker/images/calendar.gif",
        buttonImageOnly: true
		});
	});

	$(function() {
      $( "#datepicker2" ).datepicker({
        changeMonth: true,
        changeYear: true,
        showOn: "button",
        dateFormat: 'yy-mm-dd',
        buttonImage: "modules/POBHotel/pnjavascript/datepicker/development-bundle/demos/datepicker/images/calendar.gif",
        buttonImageOnly: true
		});
	});

	$(function() {
		$( "#tabs" ).tabs();
	});

</script>
<FORM METHOD=POST ACTION="<!--[pnmodurl modname='POBHotel' type='adminform' func='submit' ctrl='Hotel']-->" enctype="multipart/form-data>
<input type="hidden" name="form[id]" value="<!--[$smarty.get.id]-->" />

<div id="tabs">
<ul>
		<li><a href="#intro">Intro</a></li>
		<li><a href="#facilities">Facilities</a></li>
		<li><a href="#map">Map</a></li>
		<li><a href="#photo">Photo</a></li>
	</ul>
	<div id="intro">
		<p>
  <TABLE>
<TR>
  <TD>name</TD>
  <TD><INPUT TYPE="text" NAME="form[name]" value="<!--[$form.name]-->"></TD>
</TR>
<TR>
  <TD>status</TD>
  <TD>
   <!--[selector_object_array modname="POBHotel"
      class="Status"
      field="id"
      displayField="name"
      name="form[status_id]"
      selectedValue=$form.status_id
      ]-->

   </TD>
</TR>
<TR>
  <TD>rating</TD>
  <TD>

<SELECT NAME="form[rating]">
  
  <OPTION VALUE="1" <!--[if $form.rating == 1]-->SELECTED<!--[/if]-->>*
  <OPTION VALUE="2" <!--[if $form.rating == 2]-->SELECTED<!--[/if]-->>**
  <OPTION VALUE="3" <!--[if $form.rating == 3]-->SELECTED<!--[/if]-->>***
  <OPTION VALUE="4" <!--[if $form.rating == 4]-->SELECTED<!--[/if]-->>****
  <OPTION VALUE="5" <!--[if $form.rating == 5]-->SELECTED<!--[/if]-->>*****
</SELECT>
   </TD>
</TR>

<TR>
  <TD valign="top">Start</TD>
  <TD><INPUT TYPE="text" NAME="form[start]" ROWS="10" COLS="40" id="datepicker" value="<!--[$form.start]-->"></TD>
</TR>
<TR>
<TR>
  <TD valign="top">When built</TD>
  <TD><INPUT TYPE="text" NAME="form[when_built]" ROWS="10" COLS="40" id="datepicker2" value="<!--[$form.when_built]-->"></TD>
</TR>
<TR>
  <TD valign="top">descriptions</TD>
  <TD><TEXTAREA NAME="form[descriptions]" ROWS="10" COLS="40"><!--[$form.descriptions]--></TEXTAREA></TD>
</TR>

</TABLE>
<TABLE>
 <!--[get_all_location_category]-->
  <!--[foreach from=$locationCategoryArray item=itemAllLocationCategory name=fooLocation]-->

      <!--[assign var='compare' value='false']-->

      <!--[foreach from=$extendResult.locationCategory item=itemLocationCategory]-->
       <!--[if $itemAllLocationCategory.location_category_id eq $itemLocationCategory.location_category_id]-->
          <!--[assign var='compare' value='true']-->
        <!--[/if]-->
      <!--[/foreach]-->

      <!--[if $compare eq 'false']-->
        <!--[if $smarty.foreach.fooLocation.index%3 == 0]-->
          <tr>
            <td>
              <INPUT TYPE="checkbox" 
                     NAME="itemLocationCategory[<!--[$itemAllLocationCategory.location_category_id]-->]"
                     value="<!--[$itemAllLocationCategory.location_category_id]-->"
              >&nbsp;
                 <!--[$itemAllLocationCategory.location_category_name]-->
             </td>
        <!--[elseif $smarty.foreach.fooLocation.index%3 == 1]-->
            <td>
              <INPUT TYPE="checkbox"
                     NAME="itemLocationCategory[<!--[$itemAllLocationCategory.location_category_id]-->]"
                     value="<!--[$itemAllLocationCategory.location_category_id]-->"
              >&nbsp;
                 <!--[$itemAllLocationCategory.location_category_name]-->
            </td>
        <!--[elseif $smarty.foreach.fooLocation.index%3 == 2]-->
            <td>
              <INPUT TYPE="checkbox" 
                     NAME="itemLocationCategory[<!--[$itemAllLocationCategory.location_category_id]-->]"
                     value="<!--[$itemAllLocationCategory.location_category_id]-->"
              >&nbsp;
                 <!--[$itemAllLocationCategory.location_category_name]-->
             </td>
          </tr>
        <!--[/if]-->
        <!--[elseif  $compare eq 'true']-->
        <!--[if $smarty.foreach.fooLocation.index%3 == 0]-->
          <tr>
            <td>
              <INPUT TYPE="checkbox" 
                     NAME="itemLocationCategory[<!--[$itemAllLocationCategory.location_category_id]-->]" 
                     value="<!--[$itemAllLocationCategory.location_category_id]-->"
                     checked
              >&nbsp;
                 <!--[$itemAllLocationCategory.location_category_name]-->
            </td>
        <!--[elseif $smarty.foreach.fooLocation.index%3 == 1]-->
            <td>
              <INPUT TYPE="checkbox" 
                     NAME="itemLocationCategory[<!--[$itemAllLocationCategory.location_category_id]-->]" 
                     value="<!--[$itemAllLocationCategory.location_category_id]-->"
                     checked
               >&nbsp;
                 <!--[$itemAllLocationCategory.location_category_name]-->
            </td>
        <!--[elseif $smarty.foreach.fooLocation.index%3 == 2]-->
            <td>
              <INPUT TYPE="checkbox" 
                     NAME="itemLocationCategory[<!--[$itemAllLocationCategory.location_category_id]-->]" 
                     value="<!--[$itemAllLocationCategory.location_category_id]-->" 
                     checked
              >&nbsp;
                 <!--[$itemAllLocationCategory.location_category_name]-->
            </td>
          </tr>
        <!--[/if]-->
      <!--[/if]-->
    <!--[/foreach]-->

          <TR>
            <TD><INPUT TYPE="submit" value="submit"></TD>
            <TD><input type="button" name="Cancel" value="Cancel" onClick="window.location = '<!--[pnmodurl modname=POBHotel type=admin func=list ctrl=hotel]-->'" />
          </TD>
          </TR>
</TABLE>
</div>

	<div id="facilities">
<TABLE>
  <!--[get_all_amenity]-->
  <!--[foreach from=$amenityArray item=itemAllAmenity name=foo]-->

      <!--[assign var='compare' value='false']-->

      <!--[foreach from=$extendResult.hotelAmenity item=itemAmenity]-->
       <!--[if $itemAllAmenity.amenity_id eq $itemAmenity.amenity_id]-->
          <!--[assign var='compare' value='true']-->
        <!--[/if]-->
      <!--[/foreach]-->

      <!--[if $compare eq 'false']-->
        <!--[if $smarty.foreach.foo.index%3 == 0]-->
          <tr>
            <td>
              <INPUT TYPE="checkbox" 
                     NAME="itemAmenity[<!--[$itemAllAmenity.amenity_id]-->]"
                     value="<!--[$itemAllAmenity.amenity_id]-->"
              >&nbsp;
                 <!--[$itemAllAmenity.amenity_name]-->
             </td>
        <!--[elseif $smarty.foreach.foo.index%3 == 1]-->
            <td>
              <INPUT TYPE="checkbox"
                     NAME="itemAmenity[<!--[$itemAllAmenity.amenity_id]-->]"
                     value="<!--[$itemAllAmenity.amenity_id]-->"
              >&nbsp;
                 <!--[$itemAllAmenity.amenity_name]-->
            </td>
        <!--[elseif $smarty.foreach.foo.index%3 == 2]-->
            <td>
              <INPUT TYPE="checkbox" 
                     NAME="itemAmenity[<!--[$itemAllAmenity.amenity_id]-->]"
                     value="<!--[$itemAllAmenity.amenity_id]-->"
              >&nbsp;
                 <!--[$itemAllAmenity.amenity_name]-->
             </td>
          </tr>
        <!--[/if]-->
        <!--[elseif  $compare eq 'true']-->
        <!--[if $smarty.foreach.foo.index%3 == 0]-->
          <tr>
            <td>
              <INPUT TYPE="checkbox" 
                     NAME="itemAmenity[<!--[$itemAllAmenity.amenity_id]-->]" 
                     value="<!--[$itemAllAmenity.amenity_id]-->"
                     checked
              >&nbsp;
                 <!--[$itemAllAmenity.amenity_name]-->
            </td>
        <!--[elseif $smarty.foreach.foo.index%3 == 1]-->
            <td>
              <INPUT TYPE="checkbox" 
                     NAME="itemAmenity[<!--[$itemAllAmenity.amenity_id]-->]" 
                     value="<!--[$itemAllAmenity.amenity_id]-->"
                     checked
               >&nbsp;
                 <!--[$itemAllAmenity.amenity_name]-->
            </td>
        <!--[elseif $smarty.foreach.foo.index%3 == 2]-->
            <td>
              <INPUT TYPE="checkbox" 
                     NAME="itemAmenity[<!--[$itemAllAmenity.amenity_id]-->]" 
                     value="<!--[$itemAllAmenity.amenity_id]-->" 
                     checked
              >&nbsp;
                 <!--[$itemAllAmenity.amenity_name]-->
            </td>
          </tr>
        <!--[/if]-->
      <!--[/if]-->
    <!--[/foreach]-->
</TABLE>
</p>
            <TD><INPUT TYPE="submit" value="submit"></TD>
            <TD><input type="button" name="Cancel" value="Cancel" onClick="window.location = '<!--[pnmodurl modname=POBHotel type=admin func=list ctrl=hotel]-->'" />
	</div>

	<div id="map">
<script type="text/javascript">
    function validateForm(form) {

        //Check category
        var name = document.getElementById("name");
        if (name.value == '') {
            alert("Please enter value.");
            document.getElementById('error-name').innerHTML = " <FONT COLOR=\"#FF0000\">Please enter value.</FONT>";
            name.focus();
            return false;
        }else{
            document.getElementById('error-name').innerHTML = "";
        }
        
        //Check latitude
        var latitude = document.getElementById("latitude");
        if (latitude.value == '') {
            alert("Please enter value.");
            document.getElementById('error-latitude').innerHTML = " <FONT COLOR=\"#FF0000\">Please enter value.</FONT>";
            latitude.focus();
            return false;
        }else{
            document.getElementById('error-latitude').innerHTML = "";
        }
        //Check longitude
        var longitude = document.getElementById("longitude");
        if (longitude.value == '') {
            alert("Please enter value.");
            document.getElementById('error-longitude').innerHTML = " <FONT COLOR=\"#FF0000\">Please enter value.</FONT>";
            longitude.focus();
            return false;
        }else{
            document.getElementById('error-longitude').innerHTML = "";
        }
    }
</script>


<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
var geocoder = new google.maps.Geocoder();

function geocodePosition(pos) {
  geocoder.geocode({
    latLng: pos
  }, function(responses) {
    if (responses && responses.length > 0) {
      updateMarkerAddress(responses[0].formatted_address);
    } else {
      updateMarkerAddress('Cannot determine address at this location.');
    }
  });
}

function updateMarkerStatus(str) {
  document.getElementById('markerStatus').innerHTML = str;
}

function updateMarkerPosition(latLng) {

  document.getElementById("latitude").value = latLng.lat();
  document.getElementById("longitude").value = latLng.lng();
  document.getElementById('info').innerHTML = [
    latLng.lat(),
    latLng.lng()
  ].join(', ');


}

function updateMarkerAddress(str) {
  document.getElementById('address').innerHTML = str;
}

function initialize() {
  <!--[if $form.latitude && $form.longitude]-->
   var latLng = new google.maps.LatLng(<!--[$form.latitude]-->, <!--[$form.longitude]-->);
  <!--[else]-->
   var latLng = new google.maps.LatLng(7.968967853297759,98.32956784667977);
  <!--[/if]-->

  var map = new google.maps.Map(document.getElementById('mapCanvas'), {
      scrollwheel: false,
    zoom: 11,
    center: latLng,
    mapTypeId: google.maps.MapTypeId.HYBRID
  });
  var marker = new google.maps.Marker({
    position: latLng,
    title: '<!--[$form.name]-->',
    map: map,
    draggable: true
  });
  
  // Update current position info.
  updateMarkerPosition(latLng);
  geocodePosition(latLng);
  
  // Add dragging event listeners.
  google.maps.event.addListener(marker, 'dragstart', function() {
    updateMarkerAddress('Dragging...');
  });
  
  google.maps.event.addListener(marker, 'drag', function() {
    updateMarkerStatus('Dragging...');
    updateMarkerPosition(marker.getPosition());
  });
  
  google.maps.event.addListener(marker, 'dragend', function() {
    updateMarkerStatus('Drag ended');
    geocodePosition(marker.getPosition());
  });
}

// Onload handler to fire off the app.
google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>
<div style="clear:both"></div>
<TABLE width="100%">
<TR>
  <TD valign="top" width="80%">
      <fieldset>
      <legend>Map information</legend>

      <body>
        <style>
        #mapCanvas { width: 100%; height:600px; float: left;position:relative;
          }
        #infoPanel {float: left; margin-left: 10px;
          }
        #infoPanel div { margin-bottom: 5px;
          }
        </style>

        <div id="mapCanvas"></div>
      </fieldset>
  </TD>
  <TD valign="top" width="20%">
      <fieldset>
        <legend>Location Information</legend>
              <input type="hidden" name="form[id]" value="<!--[$smarty.request.id]-->" />

              <TABLE width='100%' border="0">
                  <TR>
                      <TD class='td-label' align="left" width="20%"><B>latitude&nbsp;:&nbsp;</B></TD>
                  </TR>
                  <TR>
                      <TD align="left">
                        <input id="latitude" type="text" name="form[position_latitude]" value="<!--[$form.position_latitude]-->" title="latitude" class="required" size="30"  /><FONT SIZE="2" COLOR="#FF0000">&nbsp;*</FONT>
                        <span id='error-latitude'></span>
                      </TD>
                  </TR>
                  <TR>
                      <TD class='td-label' align="left" width="20%"><B>longitude&nbsp;:&nbsp;</B></TD>
                  </TR>
                  <TR>
                      <TD align="left">
                        <input id="longitude" type="text" name="form[position_longitude]" value="<!--[$form.position_longitude]-->" title="longitude" class="required" size="30" /><FONT SIZE="2" COLOR="#FF0000">&nbsp;*</FONT>
                        <span id='error-longitude'></span>
                      </TD>
                  </TR>
              </TABLE>
         <BR>
        <hr>
        <div id="infoPanel">
          <b>Marker status:</b>
          <div id="markerStatus"><i>Click and drag the marker.</i></div>
          <b>Current position:</b>
          <div id="info"></div>
          <b>Closest matching address:</b>
          <div id="address"></div>
        </div>
      </body>
      </html>
      </fieldset>

  </TD>
</TR>
</TABLE>
<INPUT TYPE="submit" value="submit">
<input type="button" name="Cancel" value="Cancel" onClick="window.location = '<!--[pnmodurl modname=POBHotel type=admin func=list ctrl=hotel]-->'" />
</div>

<div id="photo">

    <script type="text/javascript">

        function readURL1(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#blah1').attr('src', e.target.result).width(150);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }


        function readURL2(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#blah2').attr('src', e.target.result).width(150);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }


        function readURL3(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#blah3').attr('src', e.target.result).width(150);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }


        function readURL4(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#blah4').attr('src', e.target.result).width(150);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }


        function readURL5(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#blah5').attr('src', e.target.result).width(150);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>
<INPUT TYPE="file" NAME="images[]" onChange="readURL1(this);" ><img id="blah1" src="modules/POBHotel/pnimages/emptypic.png" alt="your image" /><br/ >
<INPUT TYPE="file" NAME="images[]" onChange="readURL2(this);" ><img id="blah2" src="modules/POBHotel/pnimages/emptypic.png" alt="your image" /><br/ >
<INPUT TYPE="file" NAME="images[]" onChange="readURL3(this);" ><img id="blah3" src="modules/POBHotel/pnimages/emptypic.png" alt="your image" /><br/ >
<INPUT TYPE="file" NAME="images[]" onChange="readURL4(this);" ><img id="blah4" src="modules/POBHotel/pnimages/emptypic.png" alt="your image" /><br/ >
<INPUT TYPE="file" NAME="images[]" onChange="readURL5(this);" ><img id="blah5" src="modules/POBHotel/pnimages/emptypic.png" alt="your image" /><br/ >



<INPUT TYPE="submit" value="submit">
<input type="button" name="Cancel" value="Cancel" onClick="window.location = '<!--[pnmodurl modname=POBHotel type=admin func=list ctrl=hotel]-->'" />

</div>




</div><!-- end taps -->
</FORM>